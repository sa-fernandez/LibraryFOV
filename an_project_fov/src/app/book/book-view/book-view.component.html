<head>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
</head>

<div id="loan-window" class="emergent-window" *ngIf="requestLaunch">
    <ng-container *ngIf="requestType==1">
        <ng-container *ngIf="copyId!==-1">
            <div id="image-window"></div>
            <div id="component-container">
                <span (click)="closeWindow()" id="toggle-close" class="material-symbols-outlined">close</span>
                <app-loan-create [copyId] = "copyId"></app-loan-create>
            </div>
        </ng-container>
    </ng-container>

    <ng-container *ngIf="requestType==2">
        <ng-container *ngIf="book?.id">
            <div id="image-window"></div>
            <div id="component-container">
                <span (click)="closeWindow()" id="toggle-close" class="material-symbols-outlined">close</span>
                <app-create-copy [bookID]="book?.id"></app-create-copy>
            </div>
        </ng-container>
    </ng-container>
</div>

<section id="book-view" *ngIf="book">
    <div class="wrap">
        <div class="container">
            <div id="option-toogle-layout">
                <button (click)="toogleOptionActivated()" id="option-toogle">
                    <span class="material-symbols-outlined">more_vert</span>
                </button>
            </div>

            <div id="buttons-layout" class="buttons">
                <button class="button" (click)="launchWindow(2)" [style.visibility]="librarian ? 'visible' : 'hidden'" id="button-create-copy"><span class="material-symbols-outlined">add</span> Agregar Copia</button>
                <button class="button" [routerLink]="['/book/edit', book.id]" [style.visibility]="librarian ? 'visible' : 'hidden'" id="button-edit-book"><span class="material-symbols-outlined">edit</span> Editar Libro</button>
                <button class="button" (click)="deleteBook()" [style.visibility]="librarian ? 'visible' : 'hidden'" id="button-delete-book"><span class="material-symbols-outlined">remove</span> Borrar Libro</button>
            </div>

            <div class="book-style">
                <img src="https://i0.wp.com/www.irinadelgado.com/wp-content/uploads/2020/04/herramienta-ejemplos-2.png?resize=376%2C600&ssl=1">
            </div>

            <div class="book-info">

                <div id="info-layout">
                    <span class="material-symbols-outlined">category</span>
                    <p id="category">{{book.category}}</p>
                    <p id="isbn">ISBN: {{book.isbn}}</p>
                </div>

                <div id="title-layout">
                    <h1 id="title">{{book.name}}</h1>
                </div>

                <div id="description">
                    <h5>Descripci√≥n</h5>
                    <p>{{book.description}}</p>
                </div>

                <div id="copies-toggle-layout">
                    <p (click)="toggleCopiesActivated()" id="toggle-copy">Ver disponibilidad <span id="toggle-copies" class="material-symbols-outlined">expand_more</span></p>
                </div>

                <div id="copies-layout">
                    <ul id="copies" *ngFor="let copy of copies; index as i">
                        <li id="copy">
                            <div id="copy-info-disponibility">
                                <span id="status" class="material-symbols-outlined">trip_origin </span>
                            </div>

                            <div id="copy-info-id">
                                <h5>ID</h5>
                                <p>{{copy.id}}</p>           
                            </div>

                            <div id="copy-info-status">
                                <h5>Status</h5>
                                <p>{{copy.status}}</p>                       
                            </div>

                            <div id="copy-info-timestamp">
                                <h5>Timestamp</h5>
                                <p>{{copy.timestamp}}</p>                                                                  
                            </div>

                            <div id="copy-info-request">
                                <p (click)="launchWindow(1, i)" id="button-select-copy-{{i}}">Solicitar Prestamo<span class="material-symbols-outlined">expand_content</span></p>
                            </div>

                            <div id="copy-info-delete">
                                <span (click)="deleteCopy(i)" class="material-symbols-outlined" id="button-delete-copy-{{i}}">delete</span>   
                            </div>
                        </li>                
                    </ul>                
                </div>

                <div id="secundary-info">
                    <div id="editorial-layout">
                        <h5>Editorial</h5>
                        <p>{{book.editorial}}</p>
                    </div>

                    <div id="autores-layout">
                        <h5>Autores</h5>
                        <ul id="autors" *ngIf="authors">
                            <li *ngFor="let author of authors; let i = index">
                                <p>{{author.name}}</p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>   
        </div>
    </div>
</section>